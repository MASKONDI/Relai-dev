<%- include('head')-%>

  <section style="overflow: hidden;">
    <div class="container-fluid p-0">
      <div class="row">
        <div class="col-lg-6 ">
          <div class="signup">
            <div class="clearfix header-login">
              <div class="logo-signup float-left">
                <a class="navbar-brand" href="/index"><img src="images/logo-2.png" class="d-inline-block align-top"></a>
              </div>
              <div class="float-right">
                <a href="/signin-intro" class="signin text-right">
                  <button type="submit" class="btn btn-sign">SIGN IN</button>
                </a>
              </div>
            </div>
            <!-- <p>START FOR FREE</p> -->
            <h1>Service Provider Registration</h1>
            <form id="registerform" class="form" method="post" action="/api/service_provider_register">

              <% if(typeof err_msg!='undefined' ){ %>
                <span class="error_validate flash_msg" style="color: red; padding-bottom: 20px;">
                  <%= err_msg %>
                </span>
                <% }%>
                  <% if(typeof success_msg!='undefined' ){ %>
                    <span class="succ_flash_msg" style="color: green;">
                      <%= success_msg %>
                    </span>
                    <% }%>
                      <div class="row">
                        <!-- <div class="upload-image">



                          <a href="#" class="upload-profile-pic">
                            <img src="images/img_avatar.png" alt="" id="blah" class="profile-photo"
                              style="margin-left:10%"> <span>
                              <div class="custom-file-input">
                                <input type="file" id="image" name="profile-pic" value=""
                                  onchange="previewFile_profile(this)" required>
                                <input type="button">
                              </div>
                            </span>
                          </a>
                        </div> -->

                        <div class="col-md-6">
                          <div class="form-group">
                            <input type="text" class="form-control form-control-size " id="forename"
                              placeholder="Forename" name="sps_firstname" required data-rule-required="true"
                              data-rule-minlength="2" data-msg-required="Fore Name is required!">
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <input type="text" class="form-control form-control-size " id="surname"
                              placeholder="Surname" name="sps_lastname" required data-rule-required="true"
                              data-rule-minlength="2" data-msg-required="Sur Name is required!">
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group  ">
                            <input type="email" class="form-control form-control-size" id="email" placeholder="Email ID"
                              name="sps_email_id" required data-rule-required="true" data-rule-email="true"
                              data-msg-required="Email Id is required." data-msg-email="Please Enter Valid Email-ID.">
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group ">
                            <input type="number" class="form-control form-control-size" id="phoneNumber"
                              placeholder="Phone Number" name="sps_phone_number" required data-rule-required="true"
                              data-rule-minlength="10" data-rule-maxlength="12"
                              data-msg-required="PhoneNumber is required!">

                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="input-box-size-fix">
                            <select class="form-control required" id="selectBox3" name="sps_role_name"
                              data-rule-required="true" data-msg-required="Profession Name is required">
                              <option value="">Select Profession</option>
                              <option value="Accountant">Accountant
                              </option>
                              <option value="Architect"> Architect</option>
                              <option value="Developer">Developer</option>
                              <option value="Engineer">Engineer</option>
                              <option value="Financial Advisor">Financial Advisor</option>
                              <option value="Interior Designer">Interior Designer</option>
                              <option value="Lawyer/Conveyancer">Lawyer/Conveyancer</option>
                              <option value="Mortgage Broker">Developer</option>
                              <option value="Surveyor"> Surveyor</option>
                              <option value="Valuer"> Valuer</option>
                            </select>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group ">
                            <input type="number" class="form-control form-control-size" id="text"
                              placeholder="Experience in years" min="0" oninput="validity.valid||(value='');" name="sps_experience" required data-rule-required="true"
                              data-msg-required="Experience is required!">
                          </div>
                        </div>
                      </div>



                      <div class="row">


                        <div class="col-md-6">
                          <div class="form-group  ">
                            <input type="text" class="form-control" id="address" placeholder="Address"
                              name="sps_address" required data-rule-required="true"
                              data-msg-required="Address is required!">
                          </div>

                        </div>
                        <div class="col-md-6">
                          <div class="form-group  ">
                            <!-- <select name="country" class="countries form-control selectBox4" id="countryId" required
                              style="height: 44px;" data-rule-required="true"
                              data-msg-required="Country name is required!">
                              <option value="">Select Country</option>
                            </select> -->

                            <input type="text" class="form-control form-control-size" id="countryId" placeholder="Country"
                            name="country" required data-rule-required="true"
                            data-msg-required="Country is required!">

                          </div>
                        </div>
                      </div>


                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group  ">
                            <!-- <select name="state" class="states form-control selectBox4" id="stateId" required
                              style="height: 44px;" data-rule-required="true"
                              data-msg-required="County name is required!">
                              <option value="">Select County</option>
                            </select> -->

                            <input type="text" class="form-control form-control-size" id="stateId" placeholder="State"
                              name="state" required data-rule-required="true"
                              data-msg-required="State name is required!">
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group ">
                            <!-- <select name="city" class="cities form-control selectBox4" id="cityId" required
                              style="height: 44px;" data-rule-required="true"
                              data-msg-required="City name is required!">
                              <option value="">Select City</option>
                            </select> -->
                            <input type="text" class="form-control form-control-size" id="cityId" placeholder="City"
                              name="city" required data-rule-required="true"
                              data-msg-required="City name is required!">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group  ">
                            <input type="password" class="form-control form-control-size" id="password"
                              placeholder="Password" name="sps_password" required data-rule-required="true"
                              data-rule-minlength="6" data-msg-required="Password is required!">
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group ">
                            <input type="password" class="form-control form-control-size" id="password"
                              placeholder="Confirm password" name="confirmPassword" required data-rule-required="true"
                              data-rule-minlength="6" data-msg-required="Confirm Password is required!">
                          </div>
                        </div>
                      </div>


                      <p class="text-center">By signing up, you agree to the <a href="/termandconditions">terms and
                          conditions</a> of Relai.</p>
                      <!-- <a href="signup-professionals-profile.html" class="btn btn-next">Next</a> -->

                      <button type="submit" name="submit" class="btn btn-next">Next</button>

                      <p class="text-center" style="margin-top :10px">Already have an account? <a
                          href="/signin-professional">
                          Sign in
                        </a> </p>
            </form>
          </div>

        </div>

        <div class="col-md-6">
          <div class="login-slider">
            <div class="item">
              <img src="images/sinup/enjoy.png" alt="">
              <div class="carousel-caption d-none d-md-block">
                <h5 class="find-slider">Enjoy RelAi’s services
                  for your business</h5>
              </div>
            </div>
            <div class="item">
              <img src="images/sinup/find.png" alt="">
              <div class="carousel-caption d-none d-md-block">
                <h5 class="find-slider">Find the customers for
                  your services.</h5>
              </div>
            </div>
            <div class="item">
              <img src="images/sinup/upload.png" alt="">
              <div class="carousel-caption d-none d-md-block">
                <h5 class="find-slider">Upload your portfolio</h5>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>


  <script type="text/javascript" src="../js/jquery-3.3.1.min.js"></script>
  <script type="text/javascript" src="../js/slick.js"></script>
  <script type="text/javascript" src="../js/slick.min.js"></script>

  <script type="text/javascript">
    $(".login-slider").slick({
      dots: true,
      autoplay: true,
      autoplaySpeed: 3000,
      infinite: true,
      arrows: true,
      slidesToShow: 1,
      slidesToScroll: 1,
      responsive: [
        {
          breakpoint: 768,
          settings: {
            arrows: false,
            centerMode: false,
            centerPadding: '40px',
            slidesToShow: 1,
            slidesToScroll: 1
          }
        },
        {
          breakpoint: 480,
          settings: {
            arrows: false,
            centerMode: false,
            centerPadding: '40px',
            slidesToShow: 1,
            slidesToScroll: 1
          }
        }
      ]
    });

  </script>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="../js/countrystatecity.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.js"></script>

  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDon-wurpooTEYCzFKwMJkBJGa0rAR4b9c"></script>
  <script>
     google.maps.event.addDomListener(window, 'load', function ()
    {
      var places = new google.maps.places.Autocomplete(document.getElementById('address'));
      google.maps.event.addListener(places, 'place_changed', function () {
        console.log(places.getPlace());
        var getaddress = places.getPlace(); //alert(getaddress.address_components[0].long_name);
        var whole_address = getaddress.address_components;  //alert(whole_address + 'whole_address');  
        $('#cityId').val('');
        $('#stateId').val('');
        $('#countryId').val('');
        //$('#ownPinCode').val('');
        $.each(whole_address, function (key1, value1) {
          //alert(value1.long_name);
          //alert(value1.types[0]);
          if ((value1.types[0]) == 'locality') {
            var prev_long_name_city = value1.long_name;
            //alert(prev_long_name_city + '__prev_long_name_city');
            $('#cityId').val(prev_long_name_city);
          }
          if ((value1.types[0]) == 'administrative_area_level_1') {
            var prev_long_name_state = value1.long_name;
            //alert(prev_long_name_state + '__prev_long_name_state');
            $('#stateId').val(prev_long_name_state);
          }
          if ((value1.types[0]) == 'country') {
            var prev_long_name_country = value1.long_name;
            //alert(prev_long_name_country + '__prev_long_name_country');
            $('#countryId').val(prev_long_name_country);
          }
          // if ((value1.types[0]) == 'postal_code') {
          //   var prev_long_name_pincode = value1.long_name;
          //   //alert(prev_long_name_pincode + '__prev_long_name_pincode');
          //   $('#ownPinCode').val(prev_long_name_pincode);
          // }

        });
      });
      });
    
  </script>

  <script>
    $(document).ready(function () {
      $(".sidenav ul li").click(function () {
        $(".sidenav ul li").removeClass("active");
        $(this).addClass("active");
      });
    });
    $(document).ready(function () {
      $(".right-navbar li").click(function () {
        $("right-navbar li").removeClass("active");
        $(this).addClass("active");
      });
    });
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js"
    integrity="sha512-UdIMMlVx0HEynClOIFSyOrPggomfhBKJE28LKl8yR3ghkgugPnG6iLfRfHwushZl1MOPSY6TsuBDGPK2X4zYKg=="
    crossorigin="anonymous"></script>
  <script>
    jQuery.extend(jQuery.validator.messages, {
      accept: "Please enter a value with a valid extension.",
      maxlength: jQuery.validator.format("Please  don't enter more than {0} digit."),
      minlength: jQuery.validator.format("Please enter at least {0} digit."),
      rangelength: jQuery.validator.format("Please enter a value between {0} and {1} characters long."),
      range: jQuery.validator.format("Please enter a value between {0} and {1}."),
      max: jQuery.validator.format("Please enter a value less than or equal to {0}."),
      min: jQuery.validator.format("Please enter a value greater than or equal to {0}.")
    });
  </script>
  <script type="text/javascript">
    $('#registerform').validate({
      onfocusout: function (element) {
        this.element(element);
      },
      errorClass: 'error_validate',
      errorElement: 'span',
      highlight: function (element, errorClass) {
        $(element).removeClass(errorClass);
      },
      submitHandler: function (form) {
        $('.loader-box').attr('style', 'display:flex !important');
        var formData = $('#registerform').serialize();
        console.log('formData:', formData)
        $.ajax({
          type: "POST",
          data: formData,
          url: "/api/service_provider_register",
          cache: false,
          success: function (data) {
            console.log(data);
            if (data.status == false) {
              $('.loader-box').attr('style', 'display:none !important');
              Swal.fire({
                icon: 'error',
                title: data.message,
                showConfirmButton: false,
                confirmButtonColor: '#005377',
                timer: 4000
              })

            } else {
              $('.loader-box').attr('style', 'display:none !important');
              Swal.fire({
                icon: 'success',
                title: data.message,
                showConfirmButton: false,
                confirmButtonColor: '#005377',
                timer: 4000
              })

              setTimeout(function () {
                //location.reload(true);
                //window.location.href = "/otp-professional?email=" + data.serviceProviders.sps_email_id;
                window.location.href = "/signup-professionals-profile"
              }, 4000);

            }
          }
        });


      }
    });
  </script>
  <script type="text/javascript">
    $(document).ready(function () {
      var flash_msg = $('.flash_msg').html();
      if (flash_msg != "" && flash_msg != undefined) {
        setTimeout(function () { $('.flash_msg').html(''); }, 4000);
      }
    });

    $(document).ready(function () {
      var succ_flash_msg = $('.succ_flash_msg').html();
      if (succ_flash_msg != "" && succ_flash_msg != undefined) {
        setTimeout(function () { $('.succ_flash_msg').html(''); }, 4000);
      }
    });
    $(document).ready(function () {
      $('.custom-file-input input[type="file"]').change(function (e) {
        $(this).siblings('input[type="text"]').val(e.target.files[0].name);
      });
    });
  </script>
  <script>function getParameterByName(name, url = window.location.href) {
      name = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
    var email = getParameterByName('email'); // "lorem"
    var token = getParameterByName('token');
    if (token) {
      $('#token').val(token);
    }
    if (email) {
      $('#email').val(email);
      $('#email').attr('readonly', 'readonly');
    }
    else {
      $('#email').val('');
      $('#email').attrRemove('readonly');
    }
  </script>


  </body>

  </html>