<%- include('dashboard_header')-%>
  <%- include('edit-profile-model')-%>
    <!-- The Modal -->
    <div class="modal fade permission-modal" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">

          <!-- Modal Header -->
          <div class="modal-header">
            <h2 class="modal-title text-center">Change Permissions</h2>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <label class="check-permission"><img src="images/recent-user-1.png">Alex Jackson, <span>Architect</span>
              <input type="checkbox" checked="checked">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Michael Williams, <span>Financial
                Advisor</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Rachel Green, <span>Interior
                Designer</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Alex Jackson, <span>Architect</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Michael Williams, <span>Financial
                Advisor</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
            <label class="check-permission"><img src="images/recent-user-1.png">Rachel Green, <span>Interior
                Designer</span>
              <input type="checkbox">
              <span class="checkmark"></span>
            </label>
          </div>
          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-cancel" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-cancel" data-dismiss="modal">Save</button>
          </div>

        </div>
      </div>
    </div>
    <div class="dashboard-wpr">
      <div class="container-fluid">
        <div class="row content">
          <div class="col-sm-2 sidenav hidden-xs-down">
            <div class="user-login text-center">

              <%- include('profile-image')-%>

                <div class="user-name">
                  <h2>
                    <%= session.name %>
                  </h2>
                  <a href="#">
                    <%= session.email %>
                      <%- include('edit-profile-icon')-%>
                  </a>
                </div>
            </div>
            <%- include('sidebar')-%>
          </div>
          <div class="col-sm-12 col-lg-10">

            <!-- <div class="row">
                <div class="breadcumb">
                  <ul>
                    <li><a href="/dashboard"><i class="fa fa-long-arrow-left" aria-hidden="true"></i> Back to Nacary
                        Apartment</a></li>
                  </ul>
                </div>
              </div> -->
            <div>
              <div class="professional-header">
                <div class="row">
                  <div class="col-sm-12 col-lg-12">
                    <div class="docs-files">
                      <div class="clearfix">
                        <div class="float-left">
                          <div class="dropdown">
                            <button type="button" class="btn btn-professional dropdown-toggle" data-toggle="dropdown">
                              My Professionals
                              <span><img src="images/drop-down2.png" alt=""></span> </button>
                            <div class="dropdown-menu ">
                              <a class="dropdown-item item1" href="/professionals"><span><img src="images/tick.png"
                                    alt=""></span>&nbsp;All Professionals</a>
                              <hr class="divider" />
                              <a class="dropdown-item item2" href="/myprofessionals"><span><img src="images/tick.png"
                                    alt=""></span> My professionals</a>
                            </div>
                          </div>
                        </div>
                        <div class="float-right">
                          <div class="professional-right-sec">
                            <form id="professional-search-form" class="my-professional-search-form" action="#" method="POST">
                              <div id="custom-search-input-fix" style="background-color: #f0f0f0 ;">
                                  <div class="input-group professional-search-input col-lg-12">
                                    <span class="input-group-btn">
                                      <button class="btn btn-info" type="button">
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                      </button>
                                    </span>
                                    <input type="text" required class="form-control professional-search"
                                      style="background-color: #f0f0f0;"
                                      placeholder="Search professionals by name, surname, qualification " />
                                  </div>
                              </div>
                              <button type="submit"  id="professional-search-btn"
                                class="btn professional-search-btn">Search</button>
                                
                            </form>
                            <div class="dropdown keep-inside-clicks-open">
                              <!-- <button class="btn professional-search-btn dropdown-toggle" type="button"
                                id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false">
                                Show Filters
                              </button> -->
                              <button class="btn professional-search-btn dropdown-toggle" type="button"
                              onclick="openNav()">
                              Show Filters
                            </button>
                              <button type="button" onclick="resetMypFilter()" id="reset-search-btn" class="btn professional-search-btn">Reset</button>
                              <!--<div class="dropdown-menu  dropdown-show-filter" aria-labelledby="dropdownMenuButton">
                                <form id="mySPmultifilterForm" action="#" method="POST">
                                  <div class="row">
                                    <div class="col-md-5">


                                      <ul class="nav nav-tabs" id="myTab" role="tablist">
                                        <li class="nav-item">
                                          <a class="nav-link active show" id="profile-tab5" data-toggle="tab"
                                            href="#Category" role="tab" aria-controls="Category"
                                            aria-selected="false">Category</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" id="profile-tab2" data-toggle="tab" href="#Experience"
                                            role="tab" aria-controls="Experience" aria-selected="false">Experience</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" id="profile-tab3" data-toggle="tab" href="#Location"
                                            role="tab" aria-controls="Location" aria-selected="false">Location</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" id="profile-tab4" data-toggle="tab" href="#Language"
                                            role="tab" aria-controls="Language" aria-selected="false">Language</a>
                                        </li>

                                      </ul>
                                    </div>
                                    <div class="col-md-7">

                                      <div class="tab-content" id="myTabContent">

                                        <div class="tab-pane fade" id="Experience" role="tabpanel"
                                          aria-labelledby="profile-tab2">
                                          <div class="inner-box-qualification">
                                            <div class="input-group search-input-new">
                                              <i class="fa fa-search"></i>
                                              <input id="myInput1" onkeyup="myFunction1()" type="search"
                                                class="form-control" />
                                            </div>
                                            <div class="form-group for-select-existing-doc">
                                              <div class="input-group">
                                                <div>
                                                  <ul id="myUL1" style="padding-left: 0;">
                                                    <% uniqueExperience.forEach(function(exprow){ %>

                                                      <li style="list-style: none;">
                                                        <div class="for-doc-select">
                                                          <div class="checkbox">
                                                            <label>
                                                              <input onclick="return mySPmultifilter()" type="checkbox"
                                                                name="experience" value="<%=exprow %>">
                                                              <span class="cr"><i
                                                                  class="cr-icon fa fa-check"></i></span>
                                                              <%= exprow %>
                                                            </label>
                                                          </div>
                                                        </div>
                                                      </li>

                                                      <% }) %>
                                                  </ul>

                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>


                                        <div class="tab-pane fade" id="Location" role="tabpanel"
                                          aria-labelledby="profile-tab3">
                                          <div class="inner-box-qualification">
                                            <div class="input-group search-input-new">
                                              <i class="fa fa-search"></i>
                                              <input id="myInput2" onkeyup="myFunction2()" type="search"
                                                class="form-control" />
                                            </div>
                                            <div class="form-group for-select-existing-doc">
                                              <div class="input-group">
                                                <div>
                                                  <ul id="myUL2" style="padding-left: 0;">
                                                    <% uniqueCity.forEach(function(cityrow){ %>

                                                      <li style="list-style: none;">
                                                        <div class="for-doc-select">
                                                          <div class="checkbox">
                                                            <label>
                                                              <input onclick="return mySPmultifilter()" type="checkbox"
                                                                name="location_city" value="<%= cityrow %>">
                                                              <span class="cr"><i
                                                                  class="cr-icon fa fa-check"></i></span>
                                                              <%= cityrow %>
                                                            </label>
                                                          </div>
                                                        </div>
                                                      </li>

                                                      <% }) %>
                                                  </ul>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>


                                        <div class="tab-pane fade" id="Language" role="tabpanel"
                                          aria-labelledby="profile-tab4">
                                          <div class="inner-box-qualification">
                                            <div class="input-group search-input-new">
                                              <i class="fa fa-search"></i>
                                              <input id="myInput3" onkeyup="myFunction3()" type="search"
                                                class="form-control" />
                                            </div>
                                            <div class="form-group for-select-existing-doc">
                                              <div class="input-group">
                                                <div>
                                                  <ul id="myUL3" style="padding-left: 0;">
                                                    <% uniqueLanguage.forEach(function(langrow){ %>

                                                      <li style="list-style: none;">
                                                        <div class="for-doc-select">
                                                          <div class="checkbox">
                                                            <label>
                                                              <input onclick="return mySPmultifilter()" type="checkbox"
                                                                name="language" value="<%= langrow %>">
                                                              <span class="cr"><i
                                                                  class="cr-icon fa fa-check"></i></span>
                                                              <%= langrow %>
                                                            </label>
                                                          </div>
                                                        </div>
                                                      </li>

                                                      <% }) %>
                                                  </ul>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>


                                        <div class="tab-pane fade active show" id="Category" role="tabpanel"
                                          aria-labelledby="profile-tab5">
                                          <div class="inner-box-qualification">
                                            <div class="input-group search-input-new">
                                              <i class="fa fa-search"></i>
                                              <input id="myInput" onkeyup="myFunction()" type="search"
                                                class="form-control" />
                                            </div>
                                            <div class="form-group for-select-existing-doc">
                                              <div class="input-group">
                                                <div>
                                                  <ul id="myUL" style="padding-left: 0;">
                                                    <% uniqueCategory.forEach(function(catrow){ %>

                                                      <li style="list-style: none;">
                                                        <div class="for-doc-select">
                                                          <div class="checkbox">
                                                            <label>
                                                              <input onclick="return mySPmultifilter()" type="checkbox"
                                                                name="category" value="<%=catrow %>">
                                                              <span class="cr"><i
                                                                  class="cr-icon fa fa-check"></i></span>
                                                              <%= catrow %>
                                                            </label>
                                                          </div>
                                                        </div>
                                                      </li>

                                                      <% }) %>
                                                  </ul>
                                                </div>

                                              </div>
                                            </div>
                                          </div>
                                        </div>


                                      </div>
                                    </div>
                                  </div>
                                </form>
                              </div>-->
                            </div>



                          </div>
                        </div>
                      </div>
                      <div class="col-sm-12 col-lg-12">
                        <ul id="professional-role" class="icon-list">
                          <li><a data-role="Accountant" href="javascript:void(0)"><img src="images/accountant.png"
                                alt="" title=""><br><span>Accountants
                              </span></a>
                          </li>
                          <li><a data-role="Architect" href="javascript:void(0)"><img src="images/architect.png" alt=""
                                title=""><br><span>Architects</span></a>
                          </li>
                          <li><a data-role="Developer" href="javascript:void(0)"><img src="images/developers.png" alt=""
                                title=""><br><span>Developers
                              </span></a></li>
                          <li><a data-role="Engineer" href="javascript:void(0)"><img src="images/engineer.png" alt=""
                                title=""><br><span>Engineers </span></a>
                          </li>
                          <li><a data-role="Financial Advisor" href="javascript:void(0)"><img
                                src="images/financial-advisors.png" alt="" title=""><br><span>Financial
                                Advisors
                              </span></a></li>
                          <li><a data-role="Interior Designer" href="javascript:void(0)"><img
                                src="images/interior-designers.png" alt="" title=""><br><span>Interior
                                Designers
                              </span></a>
                          </li>
                          <li><a data-role="Lawyer/Conveyancer" href="javascript:void(0)"><img src="images/lawyers.png"
                                alt="" title=""><br><span>Lawyers/
                                Conveyancers</span></a>
                          </li>
                          <li><a data-role="Mortgage Broker" href="javascript:void(0)"><img
                                src="images/mortgage-broker.png" alt="" title=""><br><span>Mortgage
                                Brokers</span></a>
                          </li>
                          <li><a data-role="Surveyor" href="javascript:void(0)"><img src="images/surveyors.png" alt=""
                                title=""><br><span>Surveyors
                              </span></a>
                          </li>
                          <li style="margin-right:0px"><a data-role="Valuer" href="javascript:void(0)"><img
                                src="images/valuers.png" alt="" title=""><br><span>Valuers</span></a>
                          </li>
                          <li style="margin-right:0px"><a data-role="Solicitor" href="javascript:void(0)"><img
                            src="images/valuers.png" alt="" title=""><br><span>Solicitor</span></a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div style="display:none;" id="loading">
              <img id="loading-image" src="https://thumbs.gfycat.com/BitterEarnestBeardeddragon-small.gif" alt="Loading..." />
            </div>

            <div class="row professionals-card" id="filter_data">
              <% if(data.length>0){ data.forEach(function(row){ %>
                <div class="col-sm-4 col-md-4 col-lg-3">
                  <div class="card card-fix3">
                    <div class="row">
                      <div class="float-left card-header-fix">
                        <div class="semi-circle">
                          <a href="/professionals-detail?id=<%=row._id%>"> <img class="card-img-top"
                            src="images/recent-user-2.png" alt="Card image cap"> </a>
                        </div>
                      </div>
                      <div class="float-right card-content-fix">
                        <h5>
                          <a href="/professionals-detail?id=<%=row._id%>"><%= row.sps_fullname%></a> 
                        </h5>
                        <p>
                          <%= row.sps_role_name%>
                        </p>
                      </div>
                    </div>
                    <hr class="divider" />
                    <div class="row">
                      <div class="float-left card-icon-fix">
                        <img class=" card-image-fix" src="images/experience.png" alt="">&nbsp;<span>
                          <%= row.sps_experience%>
                            years
                        </span>
                      </div>
                      <div class="float-right card-icon-fix2">
                        <img class=" card-image-fix" src="images/rating.png" alt="">&nbsp;<span><%= row.avgRating %>
                          Rating</span>
                      </div>
                    </div>
                    <div class="card-body">
                      <button type="button" class="btn btn-cancel" style="margin-top: 30px; margin-bottom: 0px;"><a
                          style="color:#fff;" href="/professionals-detail?id=<%=row._id%>">View</a></button>
                    </div>
                  </div>
                </div>
                <% }); }else{ %>  
                  <p class="notfound_msg">My professional not found !! </p>
                  <% } %>
            </div>
            <div class="myprofessional-pagination-section">
              <nav aria-label="Page navigation example">
                <ul class="pagination">
                  <% if(totalPages > 1){ %>
                  <li class="page-item">
                    <% if(currentPage > 1){ var currentPage1 = currentPage-1; %>
                    <a class="page-link" href="/myprofessionals?page=<%=currentPage1%>" aria-label="Previous">
                      <span aria-hidden="true">&laquo;</span>
                      <span class="sr-only">Previous</span>
                    </a>
                    <% } %>
                  </li>
                  <%  for(var i=1; i<=totalPages; i++) { var tClass=''; if(i == currentPage){ tClass='active'; } %>
                  <li class="page-item <%=tClass%>"><a class="page-link" href="/myprofessionals?page=<%=i%>"><%=i%></a></li>
                  <% } %>
                  <% if(currentPage < totalPages){ var currentPage1 = parseInt(currentPage)+parseInt(1); %>
                  <li class="page-item">
                    <a class="page-link" href="/myprofessionals?page=<%=currentPage1%>" aria-label="Next">
                      <span aria-hidden="true">&raquo;</span>
                      <span class="sr-only">Next</span>
                    </a>
                  </li>
                  <% } %>
                  <% } %>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
    </div>

    <div id="mySidenav" class="sidenav show-filter-nav">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <form id="mySPmultifilterForm" action="#" method="POST">
      <div class="filter-sec">
        <h3>Category</h3>
        <div class="inner-box-qualification">
          <div class="form-group for-select-existing-doc">
            <div class="input-group">
              <div>
                <ul style="padding-left: 0;">
                  
                   <% uniqueCategory.forEach(function(catrow){ %>
                    <li style="list-style: none;">
                      <div class="for-doc-select">
                        <div class="checkbox">
                          <label>
                            <input onclick="return mySPmultifilter()" type="checkbox"
                            name="category" value="<%=catrow %>">
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            <%= catrow %>
                          </label>
                        </div>
                      </div>
                    </li>
                    <% }) %>
                </ul>
              </div>
    
            </div>
          </div>
        </div>
    
        <h3>Experience</h3>
        <div class="inner-box-qualification">
          <div class="form-group for-select-existing-doc">
            <div class="input-group">
              <div>
                <ul style="padding-left: 0;">
                    <!-- <% uniqueExperience.forEach(function(exprow){ %>
                    <li style="list-style: none;">
                      <div class="for-doc-select">
                        <div class="checkbox">
                          <label>
                            <input onclick="return mySPmultifilter()" type="checkbox"
                              name="experience" value="<%=exprow %>">
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            <%= exprow %>
                          </label>
                        </div>
                      </div>
                    </li>
                    <% }) %> -->

                    <li style="list-style: none;">
                      <div class="for-doc-select">
                        <div class="checkbox">
                          <label>
                            <input onclick="return mySPmultifilter()" type="checkbox"
                              name="experience" value="1">
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            1 year or less
                          </label>
                        </div>
                      </div>
                    </li>

                    <li style="list-style: none;">
                      <div class="for-doc-select">
                        <div class="checkbox">
                          <label>
                            <input onclick="return mySPmultifilter()" type="checkbox"
                              name="experience" value="2-5">
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            2 to 5 years
                          </label>
                        </div>
                      </div>
                    </li>

                    <li style="list-style: none;">
                      <div class="for-doc-select">
                        <div class="checkbox">
                          <label>
                            <input onclick="return mySPmultifilter()" type="checkbox"
                              name="experience" value="6-10">
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            6 to 10 years
                          </label>
                        </div>
                      </div>
                    </li>

                    <li style="list-style: none;">
                      <div class="for-doc-select">
                        <div class="checkbox">
                          <label>
                            <input onclick="return mySPmultifilter()" type="checkbox"
                              name="experience" value="11-70">
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            more than 10 years
                          </label>
                        </div>
                      </div>
                    </li>

                </ul>
              </div>
            </div>
          </div>
        </div>
    
        <h3>Location</h3>
        <div class="inner-box-qualification">
          <div class="form-group for-select-existing-doc">
            <div class="input-group">
              <div>
                <ul style="padding-left: 0;">
                  
                    <% uniqueCity.forEach(function(cityrow){ %>
                    <li style="list-style: none;">
                      <div class="for-doc-select">
                        <div class="checkbox">
                          <label>
                            <input onclick="return mySPmultifilter()" type="checkbox"
                            name="location_city" value="<%= cityrow %>">
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            <%= cityrow %>
                          </label>
                        </div>
                      </div>
                    </li>
                    <% }) %>
                    
                </ul>
              </div>
    
            </div>
          </div>
        </div>
    
        <h3>Language</h3>
        <div class="inner-box-qualification">
          <div class="form-group for-select-existing-doc">
            <div class="input-group">
              <div>
                <ul style="padding-left: 0;">
                  
    

                    <% uniqueLanguage.forEach(function(langrow){ %>
                    <li style="list-style: none;">
                      <div class="for-doc-select">
                        <div class="checkbox">
                          <label>
                            <input onclick="return mySPmultifilter()" type="checkbox"
                            name="language" value="<%= langrow %>">
                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                            <%= langrow %>
                          </label>
                        </div>
                      </div>
                    </li>
                    <% }) %>
                    
    
                    
                </ul>
              </div>
    
            </div>
          </div>
        </div>
      </div>
    </form>
    </div>
    


    <%- include('dashboard_footer')-%>

    <script>
      function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
      }
      
      function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
      }
      </script>

    <script>
      function myFunction() {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        ul = document.getElementById("myUL");
        li = ul.getElementsByTagName("li");
        for (i = 0; i < li.length; i++) {
          a = li[i].getElementsByTagName("div")[0];
          txtValue = a.textContent || a.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
          } else {
            li[i].style.display = "none";
          }
        }
      }
  
      function myFunction1() {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById("myInput1");
        filter = input.value.toUpperCase();
        ul = document.getElementById("myUL1");
        li = ul.getElementsByTagName("li");
        for (i = 0; i < li.length; i++) {
          a = li[i].getElementsByTagName("div")[0];
          txtValue = a.textContent || a.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
          } else {
            li[i].style.display = "none";
          }
        }
      }
   
      function myFunction2() {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById("myInput2");
        filter = input.value.toUpperCase();
        ul = document.getElementById("myUL2");
        li = ul.getElementsByTagName("li");
        for (i = 0; i < li.length; i++) {
          a = li[i].getElementsByTagName("div")[0];
          txtValue = a.textContent || a.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
          } else {
            li[i].style.display = "none";
          }
        }
      }
  
      function myFunction3() {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById("myInput3");
        filter = input.value.toUpperCase();
        ul = document.getElementById("myUL3");
        li = ul.getElementsByTagName("li");
        for (i = 0; i < li.length; i++) {
          a = li[i].getElementsByTagName("div")[0];
          txtValue = a.textContent || a.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
          } else {
            li[i].style.display = "none";
          }
        }
      }
    </script>